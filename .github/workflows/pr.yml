name: pr

on:
    schedule:
        - cron:  '20 0 * * *'
    push:
      branches:
        - main
    pull_request:
      branches:
        - main
    pull_request_review:
      types:
         - submitted
  
jobs:
  delete-latest:
    permissions:
      contents: write


    name: "Remove Latest Release"
    runs-on: "ubuntu-latest"
    steps: 
      - uses: dev-drprasad/delete-tag-and-release@v1.0 # PRERELEASE is v1.0 and can also be used to test and give us feedback
        with:
          tag_name: latest #(required) tag name to delete 
          github_token: ${{ secrets.GITHUB_TOKEN }} # (required) a GitHub token with write access to the repo that needs to be modified
          delete_release: true #(optional) default: true 

  github-release:
    permissions:
      contents: write

    name: "Github Release"
    runs-on: "ubuntu-latest"

    steps:
      
      - uses: actions/checkout@v3
      - uses: ncipollo/release-action@v1
        with:
          tag: "latest"
